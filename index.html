<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Саша</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            height: 100vh; background: #0a0a0a; color: white; 
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }
        .password-screen { text-align: center; max-width: 300px; width: 90vw; }
        .password-screen h1 { font-size: clamp(2rem, 10vw, 4rem); font-weight: 300; letter-spacing: -1px; margin-bottom: 2rem; opacity: 0.8; }
        .password-screen input { 
            width: 100%; padding: 15px; background: rgba(255,255,255,0.05); 
            border: 1px solid rgba(255,255,255,0.2); border-radius: 0; color: white; 
            font-size: 1.2rem; text-align: center; backdrop-filter: blur(10px);
        }
        .password-screen input::placeholder { color: rgba(255,255,255,0.4); }
        .password-screen input:focus { outline: none; border-color: rgba(255,255,255,0.5); box-shadow: 0 0 20px rgba(255,255,255,0.1); }
        .password-screen.hidden { display: none; }
        
        .slideshow { 
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            width: 35vw; height: 35vh; display: none; border-radius: 10px; overflow: hidden;
        }
        .slideshow.show { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .slide { position: absolute; width: 100%; height: 100%; opacity: 0; object-fit: cover; }
        .slide.active { opacity: 1; transition: opacity 0.8s ease; }
        
        audio { display: none; }
        .debug { position: fixed; top: 10px; right: 10px; font-size: 12px; color: #ccc; }
    </style>
</head>
<body>
    <div class="password-screen" id="passwordScreen">
        <h1>Саша</h1>
        <input type="password" id="passwordInput" placeholder="пароль" maxlength="10">
    </div>

    <div class="slideshow" id="slideshow">
        <img src="assets/s1.jpeg?v=1" class="slide active" onload="console.log('s1 loaded')">
        <img src="assets/s2.jpeg?v=2" class="slide" onload="console.log('s2 loaded')">
        <img src="assets/s3.jpeg?v=3" class="slide" onload="console.log('s3 loaded')">
        <img src="assets/s4.jpeg?v=4" class="slide" onload="console.log('s4 loaded')">
        <img src="assets/s5.jpeg?v=5" class="slide" onload="console.log('s5 loaded')">
    </div>
    
    <audio id="music" src="assets/song1.mp3?v=1" preload="auto"></audio>
    <div class="debug" id="debug"></div>

    <script>
        const passwordInput = document.getElementById('passwordInput');
        const passwordScreen = document.getElementById('passwordScreen');
        const slideshow = document.getElementById('slideshow');
        const slides = document.querySelectorAll('.slide');
        const music = document.getElementById('music');
        const debug = document.getElementById('debug');
        let slideIndex = 0;
        let interval;

        passwordInput.focus();
        
        debug.textContent = 'Готово. Жми "амина"';

        passwordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (passwordInput.value === 'амина') {
                    debug.textContent = 'ОК! Скрываем пароль...';
                    passwordScreen.classList.add('hidden');
                    
                    setTimeout(() => {
                        debug.textContent = 'Показываем слайды...';
                        slideshow.classList.add('show');
                        
                        setTimeout(() => {
                            debug.textContent = 'Запускаем музыку + слайды...';
                            playShow();
                        }, 500);
                    }, 500);
                } else {
                    passwordInput.value = '';
                    passwordInput.style.borderColor = '#ff6464';
                    debug.textContent = 'Неверный пароль!';
                    setTimeout(() => {
                        passwordInput.style.borderColor = 'rgba(255,255,255,0.2)';
                        debug.textContent = 'Готово. Жми "амина"';
                    }, 500);
                }
            }
        });

        function playShow() {
            music.currentTime = 0;
            music.play().then(() => {
                debug.textContent = 'Музыка играет! Слайды: 4 сек интервал';
            }).catch(e => {
                debug.textContent = 'Ошибка музыки: ' + e.message;
            });
            
            showSlide(0);
            interval = setInterval(nextSlide, 4000);
            setTimeout(() => clearInterval(interval), 20000);
        }

        function showSlide(n) {
            slides.forEach((slide, i) => {
                slide.classList.toggle('active', i === n);
                if (i === n) debug.textContent += ` s${n+1}`;
            });
        }

        function nextSlide() {
            slideIndex = (slideIndex + 1) % 5;
            showSlide(slideIndex);
        }
    </script>
</body>
</html>
